// Macros for the control inputs
// Quantized to 12 bits to simulate 12 bit ADCs on hardware units

#define time1Knob ((int) (params[T1_PARAM].value * 4095))
#define time2Knob ((int) (params[T2_PARAM].value * 4095))
#define morphKnob ((int) (params[MORPH_PARAM].value * 4095))
#define BKnob params[B_PARAM].value
#define AKnob params[A_PARAM].value
#define time1CV ((int) (((clamp(inputs[T1_INPUT].value, -5.0, 5.0)/10) + .5) * 4095))
#define time2CV ((int)((((clamp(inputs[T2_INPUT].value, -5.0, 5.0) * params[T2AMT_PARAM].value)/10) + .5) * 4095))
#define morphCV ((int)((((clamp(inputs[MORPH_INPUT].value, -5.0, 5.0) * params[MORPHAMT_PARAM].value)/10) + .5) * 4095))


// Macros for the UI and logic outputs

#define EXPAND_GATE_HIGH outputs[DELTA_OUTPUT].value = 5.0;
#define EXPAND_GATE_LOW outputs[DELTA_OUTPUT].value = 0;

#define ALOGIC_HIGH outputs[LOGICA_OUTPUT].value = 5.0;
#define ALOGIC_LOW outputs[LOGICA_OUTPUT].value = 0;

#define BLOGIC_HIGH outputs[LOGICB_OUTPUT].value = 5.0;
#define BLOGIC_LOW outputs[LOGICB_OUTPUT].value = 0;


#define LEDA_ON lights[LED1_LIGHT].setBrightnessSmooth(1.0);
#define LEDA_OFF lights[LED1_LIGHT].value = 0;

#define LEDB_ON lights[LED3_LIGHT].setBrightnessSmooth(1.0);
#define LEDB_OFF lights[LED3_LIGHT].value = 0;

#define LEDC_ON lights[LED2_LIGHT].setBrightnessSmooth(1.0);
#define LEDC_OFF lights[LED2_LIGHT].value = 0;

#define LEDD_ON lights[LED4_LIGHT].setBrightnessSmooth(1.0);
#define LEDD_OFF lights[LED4_LIGHT].value = 0;

#define PHASE_STATE 			flagHolder & 0b00000000000000000000000000000001
#define LAST_PHASE_STATE 		flagHolder & 0b00000000000000000000000000000010
#define GATE_ON 			flagHolder & 0b00000000000000000000000000000100
#define RGB_ON 				flagHolder & 0b00000000000000000000000000001000
#define UPDATE_PRESCALER 		flagHolder & 0b00000000000000000000000000010000
#define DRUM_MODE_ON 			flagHolder & 0b00000000000000000000000000100000
#define DRUM_ATTACK_ON 		flagHolder & 0b00000000000000000000000001000000
#define DRUM_RELEASE_ON 		flagHolder & 0b00000000000000000000000010000000
#define PITCH_ON 			flagHolder & 0b00000000000000000000000100000000
#define MORPH_ON 			flagHolder & 0b00000000000000000000001000000000
#define AMP_ON 				flagHolder & 0b00000000000000000000010000000000
#define DRUM_OFF 			flagHolder & 0b00000000000000000000100000000000
#define LAST_CYCLE 			flagHolder & 0b00000000000000000001000000000000
#define HOLD_AT_B 			flagHolder & 0b00000000000000000010000000000000
#define OSCILLATOR_ACTIVE 		flagHolder & 0b00000000000000000100000000000000
#define TRIGGER_BUTTON	 		flagHolder & 0b00000000000000001000000000000000
#define DETECT_ON	 		flagHolder & 0b00000000000000010000000000000000
#define AUX_MENU	 		flagHolder & 0b00000000000000100000000000000000
#define GATEA		 		flagHolder & 0b00000000000001000000000000000000
#define TRIGA		 		flagHolder & 0b00000000000010000000000000000000
#define DELTAA		 		flagHolder & 0b00000000000100000000000000000000
#define GATEB		 		flagHolder & 0b00000000001000000000000000000000
#define TRIGB		 		flagHolder & 0b00000000010000000000000000000000
#define DELTAB		 		flagHolder & 0b00000000100000000000000000000000


#define SET_PHASE_STATE 		flagHolder |= 0b00000000000000000000000000000001
#define SET_LAST_PHASE_STATE 		flagHolder |= 0b00000000000000000000000000000010
#define SET_GATE_ON 			flagHolder |= 0b00000000000000000000000000000100
#define SET_RGB_ON 			flagHolder |= 0b00000000000000000000000000001000
#define SET_UPDATE_PRESCALER 		flagHolder |= 0b00000000000000000000000000010000
#define SET_DRUM_MODE_ON 		flagHolder |= 0b00000000000000000000000000100000
#define SET_DRUM_ATTACK_ON 		flagHolder |= 0b00000000000000000000000001000000
#define SET_DRUM_RELEASE_ON 		flagHolder |= 0b00000000000000000000000010000000
#define SET_PITCH_ON 			flagHolder |= 0b00000000000000000000000100000000
#define SET_MORPH_ON 			flagHolder |= 0b00000000000000000000001000000000
#define SET_AMP_ON 			flagHolder |= 0b00000000000000000000010000000000
#define SET_DRUM_OFF 			flagHolder |= 0b00000000000000000000100000000000
#define SET_LAST_CYCLE 		flagHolder |= 0b00000000000000000001000000000000
#define SET_HOLD_AT_B 			flagHolder |= 0b00000000000000000010000000000000
#define SET_OSCILLATOR_ACTIVE 		flagHolder |= 0b00000000000000000100000000000000
#define SET_TRIGGER_BUTTON	 	flagHolder |= 0b00000000000000001000000000000000
#define SET_DETECT_ON	 		flagHolder |= 0b00000000000000010000000000000000
#define SET_AUX_MENU			flagHolder |= 0b00000000000000100000000000000000
#define SET_GATEA		 	flagHolder |= 0b00000000000001000000000000000000
#define SET_TRIGA		 	flagHolder |= 0b00000000000010000000000000000000
#define SET_DELTAA		 	flagHolder |= 0b00000000000100000000000000000000
#define SET_GATEB		 	flagHolder |= 0b00000000001000000000000000000000
#define SET_TRIGB		 	flagHolder |= 0b00000000010000000000000000000000
#define SET_DELTAB		 	flagHolder |= 0b00000000100000000000000000000000




#define RESET_PHASE_STATE 		flagHolder &= 0b11111111111111111111111111111110
#define RESET_LAST_PHASE_STATE 	flagHolder &= 0b11111111111111111111111111111101
#define RESET_GATE_ON 			flagHolder &= 0b11111111111111111111111111111011
#define RESET_RGB_ON 			flagHolder &= 0b11111111111111111111111111110111
#define RESET_UPDATE_PRESCALER 	flagHolder &= 0b11111111111111111111111111101111
#define RESET_DRUM_MODE_ON 		flagHolder &= 0b11111111111111111111111111011111
#define RESET_DRUM_ATTACK_ON 		flagHolder &= 0b11111111111111111111111110111111
#define RESET_DRUM_RELEASE_ON 		flagHolder &= 0b11111111111111111111111101111111
#define RESET_PITCH_ON 		flagHolder &= 0b11111111111111111111111011111111
#define RESET_MORPH_ON 		flagHolder &= 0b11111111111111111111110111111111
#define RESET_AMP_ON 			flagHolder &= 0b11111111111111111111101111111111
#define RESET_DRUM_OFF 		flagHolder &= 0b11111111111111111111011111111111
#define RESET_LAST_CYCLE 		flagHolder &= 0b11111111111111111110111111111111
#define RESET_HOLD_AT_B 		flagHolder &= 0b11111111111111111101111111111111
#define RESET_OSCILLATOR_ACTIVE 	flagHolder &= 0b11111111111111111011111111111111
#define RESET_TRIGGER_BUTTON		flagHolder &= 0b11111111111111110111111111111111
#define RESET_DETECT_ON		flagHolder &= 0b11111111111111101111111111111111
#define RESET_AUX_MENU			flagHolder &= 0b11111111111111011111111111111111
#define RESET_GATEA			flagHolder &= 0b11111111111110111111111111111111
#define RESET_TRIGA			flagHolder &= 0b11111111111101111111111111111111
#define RESET_DELTAA			flagHolder &= 0b11111111111011111111111111111111
#define RESET_GATEB			flagHolder &= 0b11111111110111111111111111111111
#define RESET_TRIGB			flagHolder &= 0b11111111101111111111111111111111
#define RESET_DELTAB			flagHolder &= 0b11111111011111111111111111111111

#define TOGGLE_GATE_ON 		flagHolder ^= 0b00000000000000000000000000000100

